# 2022/2023 304Car basic_framework-dev

电控嵌入式框架。

## 更新日志

v0.5  第一次写readme的版本，此后修改会在此版本上更新（所以前面版本更新了什么得之后有时间再填写了）

v0.6  整体修改了can1,can2加入了双FIFO及其对应中断回调函数，并且加入了等待邮箱空闲函数，以防数据冲突。在IMU中加入了BMI088_getdata，需下次测试IMU数据是否可以读取及计算。

v0.7  加入了数据不太准的陀螺仪角度（加入的二阶低通滤波不管用），并且同时can1，can2都可以使用（can2未测试是否可以正常接受数据）

v0.8  代码将要分离为两部分，其一为云台，暂时只加入了陀螺仪，其二为底盘，底盘更新了一代不完美的结算（带云台）但是误差很大。

v0.9  底盘部分加入了6020控制（遥控器和陀螺仪），没有映射角度并且没加过0检测。

v1.0  加入过零检测，代码加入初始化陀螺仪数据清零（暂时没有加入在can2云台源码清零部分，云台代码发送函数中yaw轴数据仍需放到第三个）（预写云台跟随代码）

v1.01  改进了之前代码中无法运行的一些小错误，此版本需要实机测试

v1.02  本次版本改进了电机过零，预计可以实现位置环自转不超限幅

v1.1  改成用6020数据结算底盘正方向，使方向误差减小,但是小陀螺代码仍然没有成功

v1.11  正在用aaaa变量测试底盘小陀螺代码ing，pid修改ing,计划用ID0x600发送遥控器Pitch轴数据

v1.2  双板通信成功，上下通信成功，下一版预计统一两个代码的格式，优化代码。

计划加入大喵电机。云台跟随仍然没有写入。

（一直存在的架构问题，motor数据的收发处理没有写入motors文件夹中。仍需加入底盘带陀螺仪结算之二阶低通滤波函数，待加入离线检测）

## 致谢

### 这是一个没有修改过的致谢

本框架设计参考了哈尔滨工业大学（深圳）南工骁鹰🦅战队的EC_framework以及RoboMaster官方的RoboRTS-firmware🤖。姿态解算改进自哈尔滨工程大学创梦之翼🛩️的四元数EKF姿态解算。裁判系统数据解析移植了深圳大学RoboPilot2021年电控英雄开源代码。

感谢2022-2023赛季跃鹿战队电控组参与新框架测试和开发的队员们，包括设计出机器人平台的机械组队员，还有一起联调的视觉组队员，以及负责拍摄、记录、宣传的运营组成员。
